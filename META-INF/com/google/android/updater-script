# Before: ui_print("  Hi! ");
# Now:    ui_print " Hi! "
#-----------Dynamic Installer Configs-----------#
#The #MAGISK tag is required, dont remove it
#MAGISK
setdefault magisk_support on
setdefault import_addons off
setdefault apex_mount off
setdefault extraction_speed default
setdefault permissions "0:0:0755:0644"
setdefault devices "herolte :hero2lte"
#-----------------------------------------------#
#Your script starts here:
ui_print " Seal Os Boot Animation Installer "
ui_print " -- Mounting partitions -- "
mount_all
#Check samsung device
    try=$(get_file_prop /system/build.prop ro.product.system.manufacturer)
    if [[ "$try" == "samsung" ]]; then
       ui_print " Samsung Device Detected"
abort "Samsung doesn't use bootanimation.zip"
#figure out where the boot animation is located
ui_print " finding boot animation location " 
if exist file "system/media/product/bootanimation.zip"; then
   ui_print " boot animation is located in system/product/media "
   ui_print " checking if Seal Os Boot Animation is installed "
if check_content "sealos.txt" "system/product/media/bootanimation.zip"; then
   ui_print " Seal Os Boot Animation Is already Installed "
else
   ui_print " Seal Os Boot Animation isn't installed "
   ui_print " moving current boot animation "
ui_print "you can find it in the sdcard/BootAnimationBackup folder"
#check if there are old backups 
if exist file "sdcard/BootAnimationBackup/bootanimation.zip"; then
   move /system/product/media/bootanimation.zip /sdcard/BootAnimationBackup/bootanimation1.zip
else
move /system/product/media/bootanimation.zip /sdcard/BootAnimationBackup/bootanimation.zip
fi

ui_print "-- Installing Seal Os boot animation --"
package_extract_file "system/product/media/SealOsBootAnimation.zip" /system/product/media/bootanimation.zip
fi

#addon.d survival script
ui_print " checking if rom has addon.d support "
if exist folder "system/addon.d"; then
   ui_print "rom has addon.d support"
ui_print " checking if Seal Os Boot Animation addon.d survival script is installed "
#Check if there already is a back up script
if exist file "system/addon.d/19-SealOsBootAnimation.sh"; then
   ui_print " Updateing Survival Script "
delete_recursive /system/addon.d/19-SealOsBootAnimation.sh
package_extract_file "system/addon.d/19-SealOsBootAnimation.sh" /system/addon.d/19-SealOsBootAnimation.sh
set_perm 0 0 0755 /system/addon.d/19-SealOsBootAnimation.sh
else
    ui_print " addon.d survival script isn't installed"
ui_print " installing addon.d survival script "
package_extract_file "system/addon.d/19-SealOsBootAnimation.sh" /system/addon.d/19-SealOsBootAnimation.sh
set_perm 0 0 0755 /system/addon.d/19-SealOsBootAnimation.sh
fi
else
   ui_print " rom doesn't have addon.d support "
fi

else
   ui_print " boot animation is located in system/media "
   ui_print " checking if Seal Os Boot Animation is installed "
if check_content "sealos.txt" "system/media/bootanimation.zip"; then
   ui_print " Seal Os Boot Animation Is already Installed "
else
   ui_print " Seal Os Boot Animation isn't installed "
   ui_print " moving current boot animation "
ui_print "you can find it in the sdcard/BootAnimationBackup folder"
#check if there are old backups 
if exist file "sdcard/BootAnimationBackup/bootanimation.zip"; then
   move /system/media/bootanimation.zip /sdcard/BootAnimationBackup/bootanimation1.zip
else
move /system/media/bootanimation.zip /sdcard/BootAnimationBackup/bootanimation.zip
fi

ui_print "-- Installing Seal Os boot animation --"
package_extract_file "system/product/media/SealOsBootAnimation.zip" /system/media/bootanimation.zip
fi

#addon.d survival script
ui_print " checking if rom has addon.d support "
if exist folder "system/addon.d"; then
   ui_print "rom has addon.d support"
ui_print " checking if Seal Os Boot Animation addon.d survival script is installed "
#Check if there already is a back up script
if exist file "system/addon.d/11-SealOsBootAnimation.sh"; then
   ui_print " Updateing Survival Script "
delete_recursive /system/addon.d/11-SealOsBootAnimation.sh
package_extract_file "system/addon.d/11-SealOsBootAnimation.sh" /system/addon.d/11-SealOsBootAnimation.sh
set_perm 0 0 0755 /system/addon.d/11-SealOsBootAnimation.sh
else
    ui_print " addon.d survival script isn't installed"
ui_print " installing addon.d survival script "
package_extract_file "system/addon.d/11-SealOsBootAnimation.sh" /system/addon.d/11-SealOsBootAnimation.sh
set_perm 0 0 0755 /system/addon.d/11-SealOsBootAnimation.sh
fi
else
   ui_print " rom doesn't have addon.d support "
fi

fi

ui_print " -- Unmounting ALL -- "
umount_all
ui_print " "
ui_print " -- Done -- "
ui_print " To uninstall this "
ui_print " Flash the uninstaller available in the " 
ui_print " Telegram Group and Channel "
ui_print " https://t.me/sealosinstaller Channel "
ui_print "                       CREDITS TO: "
ui_print " @TOBY19k ( I made this ) "
ui_print " @BlassGO ( Creator of Dynamic Installer) "
ui_print " @Nikhil (For helping me make addon.d survival script)"
